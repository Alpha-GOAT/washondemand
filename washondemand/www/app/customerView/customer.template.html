<ion-view title="Customer View">
  <ion-content overflow-scroll="true" class="customer-view">
    <div class="map-view" data-tap-disabled="true">
      <ng-map center="[{{customerCtrl.locData.lat}}, {{customerCtrl.locData.lng}}]" zoom="12" style="height:550px;">
        <marker position="[{{customerCtrl.locData.lat}}, {{customerCtrl.locData.lng}}]"></marker>
        <marker ng-repeat="washer in customerCtrl.washers" position="[{{washer.geolocation.lat}}, {{washer.geolocation.lng}}]" icon="http://icons.iconarchive.com/icons/icons-land/vista-map-markers/32/Map-Marker-Marker-Outside-Azure-icon.png"></marker>
      </ng-map>
    </div>

    <p ng-show="!customerCtrl.locData.found">grabbing your location.  please wait</p>

    <form class="request" ng-show="!customerCtrl.locData.found">
      <div class="btn-margin">
        <span>Select Vehicle Type:</span>
        <div class="button-bar">
          <button class="button button-outline button-positive" ng-click="customerCtrl.selectVehicle('car');" ng-class="{'active': customerCtrl.request.vehicleType.name === 'car'}">Car</button>
          <button class="button button-outline button-positive" ng-click="customerCtrl.selectVehicle('suv');" ng-class="{'active': customerCtrl.request.vehicleType.name === 'suv'}">Suv/Van</button>
          <button class="button button-outline button-positive" ng-click="customerCtrl.selectVehicle('motorcycle');"ng-class="{'active': customerCtrl.request.vehicleType.name === 'motorcycle'}">Motorcycle</button>
        </div>
      </div>

      <div class="btn-margin">
        <span>Select Wash Type:</span>
        <div class="button-bar">
            <button class="button button-outline button-positive" ng-click="customerCtrl.selectWash('basic')" ng-class="{'active': customerCtrl.request.washType === 'basic'}">Basic</button>
            <button class="button button-outline button-positive" ng-click="customerCtrl.selectWash('deluxe')" ng-class="{'active': customerCtrl.request.washType === 'deluxe'}">Deluxe</button>
            <button class="button button-outline button-positive" ng-click="customerCtrl.selectWash('premium')" ng-class="{'active': customerCtrl.request.washType === 'premium'}">Premium</button>
            <button class="button button-outline button-positive" ng-click="customerCtrl.selectWash('custom')" ng-class="{'active': customerCtrl.request.washType === 'custom'}">Custom</button>
        </div>
      </div>

      <div class="wash-detail" ng-if="customerCtrl.showInfo()">
        <div class="row">
          <div class="col">Total Price: {{customerCtrl.getPrice()}}$ <span ng-show="customerCtrl.request.washType ==='custom'">(Minimum 25$)</span></div>
        </div>
        <div class="row">
          <div class="col">
            Vehicle:
            <br>
            {{customerCtrl.request.vehicleType.name}}: {{customerCtrl.request.vehicleType.price}}$
          </div>
        </div>
        <div class="row">
          <div class="col">
            What's included:
            <br>
            <ion-list>
              <ion-checkbox ng-repeat="detail in customerCtrl.request.washInfo" ng-checked="detail.active" ng-class="{'inactiveOption': !detail.active}" ng-click="customerCtrl.toggleOption(detail)">{{detail.info}}: {{detail.price}}$</ion-checkbox>
            </ion-list>
          </div>
        </div>
      </div>
      <div class="btn-margin">
        <button class="button button-block button-positive" ng-if="customerCtrl.showRequestButton()" ng-click="customerCtrl.sendRequest()">Request A Wash</button>
        <button class="button button-block button-stable disabled" ng-if="!customerCtrl.showRequestButton()">{{customerCtrl.btnMsg}}</button>
      </div>
    </form>
  </ion-content>
</ion-view>
